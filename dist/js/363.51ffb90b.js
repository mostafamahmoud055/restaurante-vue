"use strict";(self["webpackChunkrestaurant_vue"]=self["webpackChunkrestaurant_vue"]||[]).push([[363],{9363:function(e,t,a){a.r(t),a.d(t,{default:function(){return nt}});var s=a(3396),i=a(7139),l=a(9242);const o={class:"container scroll"},r={class:"fs-3"},d={class:"container locationName"},n=(0,s._)("br",null,null,-1),c=(0,s._)("div",{style:{display:"flex","flex-direction":"column"}},[(0,s._)("div",null,[(0,s._)("button",{type:"button",class:"btn btn-primary float-start","data-bs-toggle":"modal","data-bs-target":"#addCategory"}," Add New Page ")])],-1),m={class:"modal fade",id:"CategoryUpdate",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},u={class:"modal-dialog"},g={class:"modal-content px-3"},h=(0,s._)("div",{class:"modal-header px-0 fs-5"},[(0,s.Uk)(" Update Category "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"my-3"},b=(0,s._)("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),p={key:0,class:"mt-3 error-feedback text-danger"},y={key:1,class:"mt-3 error-feedback text-danger"},v={class:"mb-3"},_=(0,s._)("label",{for:"formFile",class:"form-label"},"Photo",-1),I={class:"mb-3"},D=["src"],C={class:"modal-footer px-0"},k=(0,s._)("button",{id:"closeCategoryUpdate",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),w={class:"modal fade",id:"addCategory",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},x={class:"modal-dialog"},N={class:"modal-content"},O={class:"modal-header"},$=(0,s._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Add New Page ",-1),Z={class:"modal-body"},P={class:"mb-3"},E=(0,s._)("label",{for:"Name",class:"form-label"},"Name",-1),F={class:"mb-3"},z=(0,s._)("label",{for:"formFile",class:"form-label"},"Photo",-1),M={key:0,class:"error-feedback text-danger"},L={key:1,class:"error-feedback text-danger"},S=["src"],U={class:"modal-footer"},T=(0,s._)("br",null,null,-1),q={key:0,class:"board"},A={class:"book"},J=["id"],Y={id:"cover"},V=["src"],j={class:"flip-book"},R=["id"],B={class:"back"},H=["src"],K=["for","onClick"],W={class:"front"},G={class:"d-flex justify-content-between align-items-center flex-md-row flex-column mb-3"},X={style:{flex:"1"}},Q=["onClick"],ee={class:"d-flex justify-content-between"},te=["onClick"],ae=["onClick"],se=["for","onClick"],ie={key:1,class:"next-btn"},le={key:1,class:"container"},oe=(0,s._)("h1",{class:"locationName"},"Menu Not Found",-1),re=[oe];function de(e,t,a,oe,de,ne){const ce=(0,s.up)("DeleteCategory"),me=(0,s.up)("addItems"),ue=(0,s.up)("allItems");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(ce),(0,s.Wm)(me,{catId:de.CAToF},null,8,["catId"]),(0,s._)("div",r,[(0,s._)("div",d,(0,i.zw)(de.locationName),1),n]),c,(0,s._)("div",m,[(0,s._)("div",u,[(0,s._)("div",g,[h,(0,s._)("div",f,[b,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>de.uName=e),id:"exampleFormControlInput1"},null,512),[[l.nr,de.uName]]),de.uNameError?((0,s.wg)(),(0,s.iD)("div",p,(0,i.zw)(de.uNameError),1)):(0,s.kq)("",!0),de.errorMessage?((0,s.wg)(),(0,s.iD)("div",y,(0,i.zw)(de.errorMessage),1)):(0,s.kq)("",!0)]),(0,s._)("div",v,[_,(0,s._)("input",{class:"form-control",type:"file",id:"formFile",onChange:t[1]||(t[1]=(...e)=>ne.uPreviewFiles&&ne.uPreviewFiles(...e))},null,32)]),(0,s._)("div",I,[(0,s._)("img",{src:de.uSrcPhoto,width:"500",class:"rounded d-block mx-auto img-thumbnail"},null,8,D)]),(0,s._)("div",C,[k,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=e=>ne.updateCate())}," Update ")])])])]),(0,s._)("div",w,[(0,s._)("form",{onSubmit:t[8]||(t[8]=(0,l.iM)((()=>{}),["prevent"]))},[(0,s._)("div",x,[(0,s._)("div",N,[(0,s._)("div",O,[$,(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[3]||(t[3]=(...e)=>ne.close&&ne.close(...e))})]),(0,s._)("div",Z,[(0,s._)("div",P,[E,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"Name","onUpdate:modelValue":t[4]||(t[4]=e=>de.name=e)},null,512),[[l.nr,de.name]])]),(0,s._)("div",F,[z,(0,s._)("input",{class:"form-control",type:"file",id:"formFile",onChange:t[5]||(t[5]=(...e)=>ne.previewFiles&&ne.previewFiles(...e))},null,32)]),de.photoError?((0,s.wg)(),(0,s.iD)("div",M,(0,i.zw)(de.photoError),1)):(0,s.kq)("",!0),de.errorMessage?((0,s.wg)(),(0,s.iD)("div",L,(0,i.zw)(de.errorMessage),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s._)("img",{src:de.srcPhoto,width:"500",class:"rounded d-block p-2 mx-auto"},null,8,S)]),(0,s._)("div",U,[(0,s._)("button",{id:"closeCate",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[6]||(t[6]=(...e)=>ne.close&&ne.close(...e))}," Close "),(0,s._)("button",{type:"submit",onClick:t[7]||(t[7]=(...e)=>ne.add&&ne.add(...e)),class:"btn btn-primary"}," Add ")])])])],32)]),T,this.listOfCategories.length>0?((0,s.wg)(),(0,s.iD)("div",q,[(0,s._)("div",A,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.listOfCategories,(e=>((0,s.wg)(),(0,s.iD)("input",{key:e.id,type:"checkbox",id:`c${e.id}`},null,8,J)))),128)),(0,s._)("div",Y,[(0,s._)("img",{src:ne.listOfImages[Object.keys(ne.listOfImages)[0]],class:"pagedetails"},null,8,V)]),(0,s._)("div",j,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.listOfCategories,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"flip",key:e.name,id:`p${e.id}`},[(0,s._)("div",B,[ne.listOfImages[t+1]?((0,s.wg)(),(0,s.iD)("img",{key:0,src:ne.listOfImages[t+1],class:"pagedetails"},null,8,H)):(0,s.kq)("",!0),(0,s._)("label",{for:`c${e.id}`,class:"back-btn",onClick:a=>ne.flip_back(ne.listOfCategoriesLength[t],e.id)},"Before",8,K)]),(0,s._)("div",W,[(0,s._)("div",null,[(0,s._)("div",G,[(0,s._)("h2",X,(0,i.zw)(e.name),1),(0,s._)("label",{class:"additem","data-bs-toggle":"modal","data-bs-target":"#addItems",style:{"text-align":"end"},type:"button",onClick:t=>ne.passCatId(e.id,e.name)},"Add Items",8,Q)]),(0,s.Wm)(ue)]),(0,s._)("div",null,[(0,s._)("div",ee,[(0,s._)("label",{class:"next-btn","data-bs-toggle":"modal","data-bs-target":"#CategoryDelete",onClick:t=>ne.delete_cate(e.id,e.name)},"Delete",8,te),(0,s._)("label",{class:"next-btn","data-bs-toggle":"modal","data-bs-target":"#CategoryUpdate",onClick:a=>ne.update_cate(e.id,e.name,ne.listOfImages[t])},"Update",8,ae),t+1!=ne.listOfCategories.length?((0,s.wg)(),(0,s.iD)("label",{key:0,for:`c${e.id}`,class:"next-btn",onClick:a=>ne.flip_next(ne.listOfCategoriesLength[t+1],e.id)},"NEXT",8,se)):((0,s.wg)(),(0,s.iD)("label",ie,"Last page"))])])])],8,R)))),128))])])])):((0,s.wg)(),(0,s.iD)("div",le,re))])}a(7658);const ne={key:0,class:"d-flex justify-content-between flex-md-row flex-column"},ce={class:"name fs-6"},me=(0,s._)("br",null,null,-1),ue={class:"desc"},ge=(0,s._)("br",null,null,-1),he={key:0};function fe(e,t,a,l,o,r){return(0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.allitems,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e},[r.itemsOfCategoriesID==e.catId?((0,s.wg)(),(0,s.iD)("div",ne,[(0,s._)("p",ce,[(0,s.Uk)((0,i.zw)(e.name)+" ",1),me,(0,s._)("span",ue,(0,i.zw)(e.description),1)]),ge,r.itemsOfCategoriesID==e.catId?((0,s.wg)(),(0,s.iD)("div",he,(0,i.zw)(e.price),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])))),128)}var be=a(4239),pe={name:"allItems",computed:{allitems(){return be.Z.state.itemsOfCategories},itemsOfCategoriesID(){let e="",t=JSON.parse(JSON.stringify(be.Z.state.listOfCategories))[0],a={...t};return e=be.Z.state.itemsOfCategoriesID?be.Z.state.itemsOfCategoriesID:a.id,e}},methods:{}},ye=a(89);const ve=(0,ye.Z)(pe,[["render",fe]]);var _e=ve;const Ie={class:"modal fade",id:"CategoryDelete",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},De={class:"modal-dialog"},Ce={class:"modal-content"},ke=(0,s._)("div",{class:"modal-header"},[(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),we={class:"fs-5 modal-body"},xe={style:{color:"#ff5b4b"}},Ne={class:"modal-footer"},Oe=(0,s._)("button",{id:"closeCategoryDelete",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function $e(e,t,a,l,o,r){return(0,s.wg)(),(0,s.iD)("div",Ie,[(0,s._)("div",De,[(0,s._)("div",Ce,[ke,(0,s._)("div",we,[(0,s.Uk)(" Are you sure you want to delete "),(0,s._)("span",xe,(0,i.zw)(r.categoryInfo().name),1),(0,s.Uk)(" page? ")]),(0,s._)("div",Ne,[Oe,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=e=>r.deleteCate(r.categoryInfo().id))}," Delete ")])])])])}var Ze=a(6943),Pe=a(7387),Ee=a.n(Pe),Fe={name:"DeleteCategory",data(){return{allItemsID:[]}},methods:{categoryInfo(){return be.Z.state.category},async deleteCate(e){let t=await Ze.Z["delete"](`http://localhost:3000/categories/${e}`);if(200==t.status){let t=await Ze.Z.get(`http://localhost:3000/items?catId=${e}`);if(200==t.status)for(let e=0;e<t.data.length;e++)this.allItemsID.push(t.data[e].id);for(let e=0;e<this.allItemsID.length;e++)await Ze.Z["delete"](`http://localhost:3000/items/${this.allItemsID[e]}`)}be.Z.commit("listOfCategories",{userID:JSON.parse(localStorage.getItem("user-info"))[0]["id"],locationID:this.$route.params.id}),Ee()("#closeCategoryDelete").click()}}};const ze=(0,ye.Z)(Fe,[["render",$e]]);var Me=ze;const Le={class:"modal fade",id:"addItems",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Se={class:"modal-dialog"},Ue={class:"modal-content"},Te={class:"modal-header fs-5"},qe=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ae={class:"d-flex mt-3"},Je={class:"mx-3"},Ye=(0,s._)("label",{for:"exampleFormControlInput1",class:"form-label"},"Name",-1),Ve={key:0,class:"mt-3 error-feedback text-danger"},je={key:1,class:"mt-3 error-feedback text-danger"},Re={class:"mx-3 mb-3"},Be=(0,s._)("label",{for:"exampleFormControlInput1",class:"form-label"},"Price",-1),He={key:0,class:"mt-3 error-feedback text-danger"},Ke={class:"mx-3 mb-3"},We=(0,s._)("label",{for:"itemDesc",class:"form-label"},"Description",-1),Ge={key:0,class:"mt-3 error-feedback text-danger"},Xe={class:"modal-footer"},Qe=(0,s._)("button",{id:"closeAddItems",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function et(e,t,a,o,r,d){return(0,s.wg)(),(0,s.iD)("div",Le,[(0,s._)("div",Se,[(0,s._)("div",Ue,[(0,s._)("div",Te,[(0,s.Uk)(" Add item to "+(0,i.zw)(d.idOfCat.name)+" ",1),qe]),(0,s._)("div",Ae,[(0,s._)("div",Je,[Ye,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>r.itemName=e),id:"itemName"},null,512),[[l.nr,r.itemName]]),r.v$.itemName.$error?((0,s.wg)(),(0,s.iD)("div",Ve,(0,i.zw)(r.v$.itemName.$errors[0].$message),1)):(0,s.kq)("",!0),r.errorMessage?((0,s.wg)(),(0,s.iD)("div",je,(0,i.zw)(r.errorMessage),1)):(0,s.kq)("",!0)]),(0,s._)("div",Re,[Be,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=t=>e.itemPrice=t),id:"itemPrice"},null,512),[[l.nr,e.itemPrice]]),r.itemPriceError?((0,s.wg)(),(0,s.iD)("div",He,(0,i.zw)(r.itemPriceError),1)):(0,s.kq)("",!0)])]),(0,s._)("div",Ke,[We,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"itemDesc","onUpdate:modelValue":t[2]||(t[2]=e=>r.itemDesc=e)},null,512),[[l.nr,r.itemDesc]]),r.v$.itemDesc.$error?((0,s.wg)(),(0,s.iD)("div",Ge,(0,i.zw)(r.v$.itemDesc.$errors[0].$message),1)):(0,s.kq)("",!0)]),(0,s._)("div",Xe,[Qe,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=e=>d.addItem(d.idOfCat.id))}," Add ")])])])])}var tt=a(3053),at=a(9117),st={name:"addItems",props:["catId"],data(){return{v$:(0,tt.ZP)(),itemName:"",itemDesc:"",itemPriceError:"",errorMessage:"",userID:JSON.parse(localStorage.getItem("user-info"))[0]["id"]}},validations(){return{itemName:{required:at.C1,minLength:(0,at.Ei)(5),maxLength:(0,at.BS)(30)},itemDesc:{required:at.C1,minLength:(0,at.Ei)(10),maxLength:(0,at.BS)(70)}}},computed:{idOfCat(){return this.catId}},methods:{async addItem(e){this.v$.$validate();let t=await Ze.Z.get(`http://localhost:3000/items?userId=${this.userID}&catId=${e}`);if(200==t.status&&t.data.length>0){let e=t.data.filter((e=>e.name==this.itemName));if(e.length>0)return this.errorMessage="Category Name already Exist ",void setTimeout((()=>{this.errorMessage=""}),2500)}if(isNaN(+this.itemPrice))this.itemPriceError="This field should be a number";else if(!this.v$.$error){let t=await Ze.Z.post("http://localhost:3000/items",{name:this.itemName,price:this.itemPrice+" EGP",description:this.itemDesc,userID:this.userID,locID:this.$route.params.id,catId:e});201==t.status&&(Ee()("#itemName").val(""),Ee()("#itemDesc").val(""),Ee()("#itemPrice").val(""),Ee()("#closeAddItems").click(),be.Z.commit("listOfCategories",{userID:this.userID,locationID:this.$route.params.id}))}}}};const it=(0,ye.Z)(st,[["render",et]]);var lt=it,ot=a(1120),rt={name:"main-menu",components:{DeleteCategory:Me,addItems:lt,allItems:_e},data(){return{locationName:"",name:"",nameError:"",srcPhoto:"",uID:"",uName:"",uNameError:"",uSrcPhoto:"",CAToF:{},userID:JSON.parse(localStorage.getItem("user-info"))[0]["id"],locationID:this.$route.params.id,errorMessage:"",photoError:"",currentNext:0,currentPrev:2}},async mounted(){be.Z.commit("listOfCategories",{userID:this.userID,locationID:this.locationID});let e=localStorage.getItem("user-info");e||ot.Z.push("/Signup");let t=JSON.parse(e)[0]["id"];be.Z.commit("middlewareLocations",{id:this.$route.params.id,userID:t});let a=await Ze.Z.get(`http://localhost:3000/Locations?id=${this.$route.params.id}&userID=${t}`);200==a.status&&a.data.length>0&&(this.locationName=a.data[0].name);let s=await Ze.Z.get(`http://localhost:3000/categories?locationID=${this.$route.params.id}&userID=${t}`);200==s.status&&s.data.length>0&&this.z_index()},methods:{passCatId(e,t){this.CAToF.id=e,this.CAToF.name=t},z_index(){Ee()('input[type="checkbox"]').prop("checked",!1),setTimeout((()=>{var e=be.Z.state.listOfCategories.length;Ee()(".flip").each((function(){Ee()(this).css({"z-index":e,transform:"rotateY(0deg)"}),e--}))}),0)},delete_cate(e,t){be.Z.state.category.id=e,be.Z.state.category.name=t},update_cate(e,t,a){this.uID=e,this.uName=t,this.uSrcPhoto=a},flip_next(e,t){this.currentNext++,setTimeout((()=>{Ee()(`#c${t}`).is(":checked")&&Ee()(`#c${t}`).parent().find(".flip-book").find(`#p${t}`).css({transform:"rotateY(-180deg)","z-index":this.currentNext})}),0),setTimeout((()=>{be.Z.state.itemsOfCategoriesID=e}),50)},flip_back(e,t){this.currentPrev++,setTimeout((()=>{Ee()(`#c${t}`).is(":checked")||Ee()(`#c${t}`).parent().find(".flip-book").find(`#p${t}`).css({transform:"rotateY(0deg)","z-index":this.currentPrev})}),100),setTimeout((()=>{be.Z.state.itemsOfCategoriesID=e}),310)},async updateCate(){let e=be.Z.state.listOfCategories.filter((e=>e.name==this.uName));if(e.length>0)return this.errorMessage="Category Name already Exist ",void setTimeout((()=>{this.errorMessage="",this.uName=""}),1500);if(this.uName.length<3||this.uName.length>10)return this.uNameError="",this.uNameError="This field should be at least 3 characters and at most 10 characters long",void setTimeout((()=>{this.uName=""}),1500);let t=await Ze.Z.put(`http://localhost:3000/categories/${this.uID}`,{name:this.uName,photo:this.uSrcPhoto,userID:this.userID,locationID:this.locationID});Ee()("#closeCategoryUpdate").click(),200==t.status&&be.Z.commit("listOfCategories",{userID:this.userID,locationID:this.locationID})},close(){this.clearData()},clearData(){Ee()("#Name").val(""),Ee()("#formFile").val(""),this.srcPhoto="",this.name=""},async add(){let e=be.Z.state.listOfCategories.filter((e=>e.name==this.name));if(e.length>0)return this.errorMessage="Category Name already Exist ",void setTimeout((()=>{this.errorMessage="",this.name=""}),1500);if(""==this.srcPhoto)return this.photoError="Image is required",void setTimeout((()=>{this.photoError=""}),1500);if(""==this.name)return this.photoError="Image is required",void setTimeout((()=>{this.photoError=""}),1500);let t=await Ze.Z.post("http://localhost:3000/categories",{name:this.name,userID:this.userID,locationID:this.locationID,photo:this.srcPhoto});Ee()("#closeCate").click(),201==t.status&&be.Z.commit("listOfCategories",{userID:this.userID,locationID:this.locationID})},previewFiles(e){const t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.addEventListener("load",(()=>{this.srcPhoto=a.result}))},uPreviewFiles(e){const t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.addEventListener("load",(()=>{this.uSrcPhoto=a.result}))}},computed:{listOfCategories(){return be.Z.state.listOfCategories},listOfCategoriesLength(){return be.Z.state.listOfCategoriesLength},listOfImages(){return this.z_index(),be.Z.state.categoryImages}}};const dt=(0,ye.Z)(rt,[["render",de]]);var nt=dt}}]);
//# sourceMappingURL=363.51ffb90b.js.map