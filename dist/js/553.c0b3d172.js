"use strict";(self["webpackChunkrestaurant_vue"]=self["webpackChunkrestaurant_vue"]||[]).push([[553],{2553:function(e,t,a){a.r(t),a.d(t,{default:function(){return fe}});var s=a(3396);const o={class:"container-fluid"},l={key:1,class:"container"},r=(0,s._)("h1",{class:"notFound"},"Restaurants Not Found",-1),n=[r];function d(e,t,a,r,d,i){const c=(0,s.up)("NewLocation"),h=(0,s.up)("LocationsView");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(c),i.listOfLocations.length>0?((0,s.wg)(),(0,s.j4)(h,{key:0,allLocations:i.listOfLocations},null,8,["allLocations"])):((0,s.wg)(),(0,s.iD)("div",l,n))])}a(7658);var i=a(1120),c=a(9242),h=a(7139);const u={class:"modal fade",id:"AddRestaurant",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},m={class:"modal-dialog"},p={class:"modal-content"},f={class:"modal-header"},g=(0,s._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Add New Restaurant ",-1),b={class:"modal-body"},v={class:"mb-3"},_=(0,s._)("label",{for:"RestaurantName",class:"form-label"},"Name",-1),w={key:0,class:"error-feedback text-danger"},y={class:"mb-3"},L=(0,s._)("label",{for:"RestaurantPhone",class:"form-label"},"Phone",-1),k={key:1,class:"error-feedback text-danger"},D={class:"mb-3"},I=(0,s._)("label",{for:"RestaurantAddress",class:"form-label"},"Address",-1),E={key:2,class:"error-feedback text-danger"},R={class:"mb-3"},N=(0,s._)("label",{for:"RestaurantPhoto",class:"form-label"},"Photo",-1),x={key:3,class:"error-feedback text-danger"},P={class:"modal-footer"};function C(e,t,a,o,l,r){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",u,[(0,s._)("div",m,[(0,s._)("div",p,[(0,s._)("div",f,[g,(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e))})]),(0,s._)("div",b,[(0,s._)("form",null,[(0,s._)("div",v,[_,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"RestaurantName","onUpdate:modelValue":t[1]||(t[1]=e=>l.rName=e)},null,512),[[c.nr,l.rName]])]),l.nameError?((0,s.wg)(),(0,s.iD)("div",w,(0,h.zw)(l.nameError),1)):(0,s.kq)("",!0),(0,s._)("div",y,[L,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"RestaurantPhone","onUpdate:modelValue":t[2]||(t[2]=e=>l.rPhone=e)},null,512),[[c.nr,l.rPhone]])]),l.phoneError?((0,s.wg)(),(0,s.iD)("div",k,(0,h.zw)(l.phoneError),1)):(0,s.kq)("",!0),(0,s._)("div",D,[I,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"RestaurantAddress","onUpdate:modelValue":t[3]||(t[3]=e=>l.rAddress=e)},null,512),[[c.nr,l.rAddress]])]),l.addressError?((0,s.wg)(),(0,s.iD)("div",E,(0,h.zw)(l.addressError),1)):(0,s.kq)("",!0),(0,s._)("div",R,[N,(0,s._)("input",{type:"file",class:"form-control",id:"RestaurantPhoto",onChange:t[4]||(t[4]=(...e)=>r.previewFiles&&r.previewFiles(...e))},null,32)]),l.photoError?((0,s.wg)(),(0,s.iD)("div",x,(0,h.zw)(l.photoError),1)):(0,s.kq)("",!0)])]),(0,s._)("div",P,[(0,s._)("button",{id:"closeModalRestaurant",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[5]||(t[5]=(...e)=>r.close&&r.close(...e))}," Close "),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=(...e)=>r.add&&r.add(...e))}," Add ")])])])])])}var A=a(6943),Z=a(7387),U=a.n(Z),O=a(4239),M={name:"NewLocation",data(){return{rName:"",rAddress:"",rPhone:"",rPhoto:"",nameError:"",addressError:"",phoneError:"",photoError:""}},methods:{close(){this.clearData()},clearData(){U()("#RestaurantName").val(""),U()("#RestaurantAddress").val(""),U()("#RestaurantPhone").val(""),U()("#RestaurantPhoto").val("")},async add(){if(this.nameError="",this.addressError="",this.photoError="",this.phoneError="",U()("#RestaurantName").val().length<3&&(this.nameError="This field should be at least 3 characters long"),U()("#RestaurantAddress").val().length<12&&(this.addressError="This field should be at least 12 characters long"),U()("#RestaurantPhone").val().length<10&&(this.phoneError="This field should be at least 10 characters long"),Number.isInteger(+U()("#RestaurantPhone").val())||(this.phoneError="This field should be a number"),""==this.rPhoto&&(this.photoError="Image is required"),setTimeout((()=>{this.nameError="",this.addressError="",this.phoneError="",this.photoError=""}),3e3),!(this.nameError||this.addressError||this.phoneError||this.photoError)){let e=await A.Z.post("${import.meta.env.VITE_ROOT_API}/Locations",{name:this.rName,address:this.rAddress,phone:this.rPhone,photo:this.rPhoto,userID:JSON.parse(localStorage.getItem("user-info"))[0].id});201==e.status&&(this.retrieveLocations(),this.clearData(),U()("#closeModalRestaurant").click())}},async retrieveLocations(){let e=localStorage.getItem("user-info"),t=JSON.parse(e)[0]["id"];O.Z.commit("listOfLocations",{userID:t})},previewFiles(e){const t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),a.addEventListener("load",(()=>{this.rPhoto=a.result}))}}},S=a(89);const z=(0,S.Z)(M,[["render",C]]);var V=z;const $={class:"row justify-content-around",style:{gap:"30px"}},F={class:"modal fade",id:"modalDelete",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},q={class:"modal-dialog"},T={class:"modal-content"},W=(0,s._)("div",{class:"modal-header"},[(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),J={class:"fs-5 modal-body"},j={style:{color:"#ff5b4b"}},H={class:"modal-footer"},K=(0,s._)("button",{id:"closeModalDelete",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Y=["src"],B={class:"card-body"},G={class:"card-title"},Q=(0,s._)("p",null,null,-1),X=["href"],ee=(0,s._)("br",null,null,-1),te=(0,s._)("p",null,null,-1),ae=["href"],se=(0,s._)("br",null,null,-1),oe=(0,s._)("br",null,null,-1),le={class:"row justify-content-around"},re={class:"col-lg-3 col-12 btn btn-primary mt-1 p-x-1 View"},ne={class:"col-lg-3 col-12 btn btn-primary mt-1 p-x-1 Update"},de=["value"];function ie(e,t,a,o,l,r){const n=(0,s.up)("font-awesome-icon"),d=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",$,[(0,s._)("div",F,[(0,s._)("div",q,[(0,s._)("div",T,[W,(0,s._)("div",J,[(0,s.Uk)(" Are you sure you want to delete "),(0,s._)("span",j,(0,h.zw)(l.deletedName),1),(0,s.Uk)(" restaurant? ")]),(0,s._)("div",H,[K,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>r.deleteCard&&r.deleteCard(...e))}," Delete ")])])])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.allLocations,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"card col-xl-3 col-sm-4 col-6",key:e.id},[(0,s._)("img",{src:e.photo,class:"card-img-top",alt:""},null,8,Y),(0,s._)("div",B,[(0,s._)("h5",G,(0,h.zw)(e.name),1),Q,(0,s._)("a",{class:"map",target:"blank",href:`https://www.google.com/maps/place/${e.address}`},[(0,s.Wm)(n,{icon:"fa-solid fa-location-dot"}),(0,s.Uk)(" "+(0,h.zw)(e.address),1)],8,X),ee,te,(0,s._)("a",{href:`tel:${e.phone}`,class:"tel"},[(0,s.Wm)(n,{icon:"fa-solid fa-phone"}),(0,s.Uk)(" "+(0,h.zw)(e.phone),1)],8,ae),se,oe,(0,s._)("div",le,[(0,s._)("a",re,[(0,s.Wm)(d,{class:"nav-link",style:{color:"#fff !important"},to:{name:"Menu",params:{id:e.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)("Menu")])),_:2},1032,["to"])]),(0,s._)("a",ne,[(0,s.Wm)(d,{class:"nav-link",style:{color:"#fff !important"},to:{name:"Update",params:{id:e.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)("Update")])),_:2},1032,["to"])]),(0,s._)("a",{class:"col-lg-3 col-12 btn btn-primary mt-1 p-x-1 Delete",type:"button","data-bs-toggle":"modal","data-bs-target":"#modalDelete",onClick:t[1]||(t[1]=(...e)=>r.deletedIDfun&&r.deletedIDfun(...e))},"Delete"),(0,s._)("input",{type:"hidden",name:"id",value:e.id},null,8,de)])])])))),128))])}var ce={data(){return{deletedID:"",deletedName:"",catIdLength:[],itemsLength:[],itemsIdLength:[]}},name:"LocationsView",props:["allLocations"],methods:{deletedIDfun(){this.deletedID=U()(event.target).closest(".card-body").find("input[type=hidden]").val(),this.deletedName=U()(event.target).closest(".card-body").find("h5").text()},async deleteCard(){let e=await A.Z.get(`${import.meta.env.VITE_ROOT_API}/categories?locationID=${this.deletedID}`);if(200==e.status){for(let t=0;t<e.data.length;t++)this.catIdLength.push(e.data[t].id);console.log(this.catIdLength);for(let e=0;e<this.catIdLength.length;e++){let t=await A.Z.get(`${import.meta.env.VITE_ROOT_API}/items?catId=${this.catIdLength[e]}`);this.itemsLength.push(t.data)}console.log(this.itemsLength),console.log("/------------------/");for(let e=0;e<this.itemsLength.length;e++)for(let t=0;t<this.itemsLength[e].length;t++)this.itemsIdLength.push(this.itemsLength[e][t].id);console.log(this.itemsIdLength)}let t=await A.Z["delete"](`${import.meta.env.VITE_ROOT_API}/Locations/${this.deletedID}`);if(200==t.status){for(let e=0;e<this.catIdLength.length;e++)await A.Z["delete"](`${import.meta.env.VITE_ROOT_API}/categories/${this.catIdLength[e]}`);for(let e=0;e<this.itemsIdLength.length;e++)await A.Z["delete"](`${import.meta.env.VITE_ROOT_API}/items/${this.itemsIdLength[e]}`)}U()("#closeModalDelete").click();let a=localStorage.getItem("user-info"),s=JSON.parse(a)[0]["id"];O.Z.commit("listOfLocations",{userID:s})}}};const he=(0,S.Z)(ce,[["render",ie]]);var ue=he,me={name:"HomeView",data(){return{userID:""}},components:{NewLocation:V,LocationsView:ue},async mounted(){let e=localStorage.getItem("user-info");if(e||i.Z.push("/Signup"),e){let t=JSON.parse(e)[0]["id"];O.Z.commit("listOfLocations",{userID:t})}},computed:{listOfLocations(){return O.Z.state.listOfLocations}}};const pe=(0,S.Z)(me,[["render",d]]);var fe=pe}}]);
//# sourceMappingURL=553.c0b3d172.js.map